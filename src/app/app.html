<div class="calculator" [class.dark]="isDark()">
  <div class="header">
    <button class="theme-toggle" (click)="toggleTheme()" title="Cambiar tema">
      {{ isDark() ? 'Dark Mode' : 'Light Mode' }}
    </button>
    <div class="mode">{{ isDegrees() ? 'DEG' : 'RAD' }}</div>
  </div>

  <div class="display">
    <div class="expression">{{ currentExpression() }}</div>
    <div class="result">{{ display() }}</div>
  </div>

  @defer (on viewport) {
    <div class="history">
      @for (entry of history(); track entry) {
        <div class="history-item">{{ entry }}</div>
      }
    </div>
  } @placeholder {
    <div class="history-placeholder"></div>
  }

  <div class="buttons">
    @for (row of buttonLayout; track row) {
      @for (btn of row; track btn.label) {
        <button
          [class]="btn.class"
          [attr.colspan]="btn.colspan"
          [attr.rowspan]="btn.rowspan"
          (click)="handleClick(btn)"
          [title]="btn.tooltip">
          {{ btn.label }}
        </button>
      }
    }
  </div>
</div>
